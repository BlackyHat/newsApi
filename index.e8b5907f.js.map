{"mappings":"AACA,IAAIA,EAAQC,GAAYC,SAASC,cAAcF,GAE/C,MAAMG,EAAiB,ICAR,MAObC,gBACE,MAAMC,EAAe,IAAIC,gBAAgB,CACvCC,OAXU,mCAYVC,EAAGC,KAAKC,YACRC,SAAU,GACVC,KAAMH,KAAKG,KACXC,OAAQ,cAGVC,QAAQC,IAAIN,KAAKO,MAYjB,OAAOC,MAJK,qCAASZ,KAQlBa,MAAKC,IACJ,IAAKA,EAAEC,GACL,MAAM,IAAIC,MAAM,iBAElB,OAAOF,EAAEG,MAAM,IAEhBJ,MAAK,EAACK,SAAEA,MACPd,KAAKe,gBAEED,KAERE,OAAMC,GAAKZ,QAAQC,IAAIW,I,CAG5BC,UACE,MAAMX,EAAO,IAAIY,KAEjB,OADAd,QAAQC,IAAIC,EAAKa,gBACVb,C,CAGTQ,gBACEf,KAAKG,MAAQ,C,CAEfkB,YACErB,KAAKG,KAAO,C,CAGVmB,YACF,OAAOtB,KAAKC,W,CAGVqB,UAAMC,GACRvB,KAAKC,YAAcsB,C,CA/DrBC,cACExB,KAAKC,YAAc,GACnBD,KAAKG,KAAO,C,GDahB,SAASsB,IACP/B,EAAeC,gBAAgBc,MAAKK,KAKtC,SAA8BA,GAC5BT,QAAQqB,IAAIZ,GACZ,MAAMa,EAASb,EACZc,KACCC,GAAM,0BACOA,EAAGC,mGAEKD,EAAGE,2DACJF,EAAGG,iDACOH,EAAGI,sCACdJ,EAAGK,qEAKvBC,KAAK,IACR7C,EAAM,aAAa8C,mBAAmB,YAAaT,E,CApBjDU,CAAqBvB,EAAS,G,CAjBlCxB,EAAM,mBAAmBgD,iBAAiB,UAG1C,SAAkBrB,GAChBA,EAAEsB,iBACF7C,EAAe4B,MAAQL,EAAEuB,cAAcC,SAASnB,MAAMoB,MACtDhD,EAAe2B,YAmCf/B,EAAM,aAAaqD,UAAY,GAjC/BlB,G,IAPFnC,EAAM,SAASgD,iBAAiB,QAASb","sources":["src/js/news.js","src/js/news-service.js"],"sourcesContent":["import NewsApiService from './news-service';\nlet getEl = selector => document.querySelector(selector);\n\nconst newsApiService = new NewsApiService();\ngetEl('.js-form-search').addEventListener('submit', onSearch);\ngetEl('.more').addEventListener('click', fetchArticles);\n\nfunction onSearch(e) {\n  e.preventDefault();\n  newsApiService.query = e.currentTarget.elements.query.value;\n  newsApiService.resetPage();\n  clearArticlesContainer();\n  fetchArticles();\n}\n\n// function onLoadMore() {\n//   newsApiService.fetchArticles().then(appendArticlesMarkup);\n// }\n\nfunction fetchArticles() {\n  newsApiService.fetchArticles().then(articles => {\n    appendArticlesMarkup(articles);\n  });\n}\n\nfunction appendArticlesMarkup(articles) {\n  console.dir(articles);\n  const markup = articles\n    .map(\n      el => `<li>\n        <a href=\"${el.url}\" target=\"_blank\" rel=\"nopener noreferrer\">\n            <article>\n                <img src=${el.urlToImage} alt='' width=\"480\">\n                    <h2>${el.title}</h2>\n                    <p>Posted by: ${el.author}</p>\n                    <p>${el.description}</p>\n            </article>\n        </a>\n    </li>`,\n    )\n    .join('');\n  getEl('.articles').insertAdjacentHTML('beforeEnd', markup);\n}\n\nfunction clearArticlesContainer() {\n  getEl('.articles').innerHTML = '';\n}\n","const URL = 'https://newsapi.org/v2/everything?';\nconst API_KEY = '68f7fb59d89447ca8b8d9788122c4468';\n\nexport default class NewsApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n    // this.date = this.getDate();\n  }\n\n  fetchArticles() {\n    const searchParams = new URLSearchParams({\n      apiKey: API_KEY,\n      q: this.searchQuery,\n      pageSize: 15,\n      page: this.page,\n      sortBy: 'relevancy',\n      // from: this.date,\n    });\n    console.log(this.date);\n\n    // const options = {\n    //   headers: {\n    //     'x-api-key': API_KEY,\n    //   },\n    // };\n\n    const url = `${URL}${searchParams}`;\n    // const url = `${URL}q=${this.searchQuery}&searchIn=title,content&pageSize=5&page=${this.page}`;\n    // const url = `${URL}/top-headlines?country=ua&${this.searchQuery}&pageSize=5&page=${this.page}`;\n\n    return fetch(\n      url,\n      // , options\n    )\n      .then(r => {\n        if (!r.ok) {\n          throw new Error('status not ok');\n        }\n        return r.json();\n      })\n      .then(({ articles }) => {\n        this.incrementPage();\n\n        return articles;\n      })\n      .catch(e => console.log(e));\n  }\n\n  getDate() {\n    const date = new Date();\n    console.log(date.toDateString());\n    return date;\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n"],"names":["$4ebb81a1f389e6fd$var$getEl","selector","document","querySelector","$4ebb81a1f389e6fd$var$newsApiService","fetchArticles","searchParams","URLSearchParams","apiKey","q","this","searchQuery","pageSize","page","sortBy","console","log","date","fetch","then","r","ok","Error","json","articles","incrementPage","catch","e","getDate","Date","toDateString","resetPage","query","newQuery","constructor","$4ebb81a1f389e6fd$var$fetchArticles","dir","markup","map","el","url","urlToImage","title","author","description","join","insertAdjacentHTML","$4ebb81a1f389e6fd$var$appendArticlesMarkup","addEventListener","preventDefault","currentTarget","elements","value","innerHTML"],"version":3,"file":"index.e8b5907f.js.map"}