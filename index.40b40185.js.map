{"mappings":"AACA,IAAIA,EAAQC,GAAYC,SAASC,cAAcF,GAE/C,MAAMG,EAAiB,ICAR,MAObC,gBACE,MAAMC,EAAe,IAAIC,gBAAgB,CACvCC,EAAGC,KAAKC,YACRC,SAAU,GACVC,KAAMH,KAAKG,KACXC,OAAQ,YACRC,OAfU,qCAkBZC,QAAQC,IAAIP,KAAKQ,MAYjB,OAAOC,MAJK,qCAASZ,IANL,CACda,QAAS,CACPC,cAtBQ,sCA+BTC,MAAKC,IACJ,IAAKA,EAAEC,GACL,MAAM,IAAIC,MAAM,iBAElB,OAAOF,EAAEG,MAAM,IAEhBJ,MAAK,EAACK,SAAEA,MACPjB,KAAKkB,gBAEED,KAERE,OAAMC,GAAKd,QAAQC,IAAIa,I,CAG5BC,UACE,MAAMb,EAAO,IAAIc,KAEjB,OADAhB,QAAQC,IAAIC,EAAKe,gBACVf,C,CAGTU,gBACElB,KAAKG,MAAQ,C,CAEfqB,YACExB,KAAKG,KAAO,C,CAGVsB,YACF,OAAOzB,KAAKC,W,CAGVwB,UAAMC,GACR1B,KAAKC,YAAcyB,C,CA5DrBC,cACE3B,KAAKC,YAAc,GACnBD,KAAKG,KAAO,C,GDahB,SAASyB,IACPjC,EAAeC,gBAAgBgB,MAAKK,KAKtC,SAA8BA,GAC5BX,QAAQuB,IAAIZ,GACZ,MAAMa,EAASb,EACZc,KACCC,GAAM,0BACOA,EAAGC,mGAEKD,EAAGE,2DACJF,EAAGG,iDACOH,EAAGI,sCACdJ,EAAGK,qEAKvBC,KAAK,IACR/C,EAAM,aAAagD,mBAAmB,YAAaT,E,CApBjDU,CAAqBvB,EAAS,G,CAjBlC1B,EAAM,mBAAmBkD,iBAAiB,UAG1C,SAAkBrB,GAChBA,EAAEsB,iBACF/C,EAAe8B,MAAQL,EAAEuB,cAAcC,SAASnB,MAAMoB,MACtDlD,EAAe6B,YAmCfjC,EAAM,aAAauD,UAAY,GAjC/BlB,G,IAPFrC,EAAM,SAASkD,iBAAiB,QAASb","sources":["src/js/news.js","src/js/news-service.js"],"sourcesContent":["import NewsApiService from './news-service';\nlet getEl = selector => document.querySelector(selector);\n\nconst newsApiService = new NewsApiService();\ngetEl('.js-form-search').addEventListener('submit', onSearch);\ngetEl('.more').addEventListener('click', fetchArticles);\n\nfunction onSearch(e) {\n  e.preventDefault();\n  newsApiService.query = e.currentTarget.elements.query.value;\n  newsApiService.resetPage();\n  clearArticlesContainer();\n  fetchArticles();\n}\n\n// function onLoadMore() {\n//   newsApiService.fetchArticles().then(appendArticlesMarkup);\n// }\n\nfunction fetchArticles() {\n  newsApiService.fetchArticles().then(articles => {\n    appendArticlesMarkup(articles);\n  });\n}\n\nfunction appendArticlesMarkup(articles) {\n  console.dir(articles);\n  const markup = articles\n    .map(\n      el => `<li>\n        <a href=\"${el.url}\" target=\"_blank\" rel=\"nopener noreferrer\">\n            <article>\n                <img src=${el.urlToImage} alt='' width=\"480\">\n                    <h2>${el.title}</h2>\n                    <p>Posted by: ${el.author}</p>\n                    <p>${el.description}</p>\n            </article>\n        </a>\n    </li>`,\n    )\n    .join('');\n  getEl('.articles').insertAdjacentHTML('beforeEnd', markup);\n}\n\nfunction clearArticlesContainer() {\n  getEl('.articles').innerHTML = '';\n}\n","const URL = 'https://newsapi.org/v2/everything?';\nconst API_KEY = '68f7fb59d89447ca8b8d9788122c4468';\n\nexport default class NewsApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n    // this.date = this.getDate();\n  }\n\n  fetchArticles() {\n    const searchParams = new URLSearchParams({\n      q: this.searchQuery,\n      pageSize: 15,\n      page: this.page,\n      sortBy: 'relevancy',\n      apiKey: API_KEY,\n      // from: this.date,\n    });\n    console.log(this.date);\n\n    const options = {\n      headers: {\n        authorization: API_KEY,\n      },\n    };\n\n    const url = `${URL}${searchParams}`;\n    // const url = `${URL}q=${this.searchQuery}&searchIn=title,content&pageSize=5&page=${this.page}`;\n    // const url = `${URL}/top-headlines?country=ua&${this.searchQuery}&pageSize=5&page=${this.page}`;\n\n    return fetch(url, options)\n      .then(r => {\n        if (!r.ok) {\n          throw new Error('status not ok');\n        }\n        return r.json();\n      })\n      .then(({ articles }) => {\n        this.incrementPage();\n\n        return articles;\n      })\n      .catch(e => console.log(e));\n  }\n\n  getDate() {\n    const date = new Date();\n    console.log(date.toDateString());\n    return date;\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n"],"names":["$4ebb81a1f389e6fd$var$getEl","selector","document","querySelector","$4ebb81a1f389e6fd$var$newsApiService","fetchArticles","searchParams","URLSearchParams","q","this","searchQuery","pageSize","page","sortBy","apiKey","console","log","date","fetch","headers","authorization","then","r","ok","Error","json","articles","incrementPage","catch","e","getDate","Date","toDateString","resetPage","query","newQuery","constructor","$4ebb81a1f389e6fd$var$fetchArticles","dir","markup","map","el","url","urlToImage","title","author","description","join","insertAdjacentHTML","$4ebb81a1f389e6fd$var$appendArticlesMarkup","addEventListener","preventDefault","currentTarget","elements","value","innerHTML"],"version":3,"file":"index.40b40185.js.map"}